// This function creates the page layout and data presented on the screen that references the API	

var app = require("app");

var checkData = function(json) {
	
	var win = Ti.UI.createWindow({
		backgroundColor: "gray",
		layout: "vertical"
	});
	
	var labelFormat = {
		color: "white",
		font: {fontSize: 16, fontWeight: "bold", fontFamily: "Roboto"}
	};
	
	var bg = Ti.UI.createView({
		backgroundImage: "images/170.jpg",
		top: 20,
		height: "100%",
		width: "100%"
	});
	
	var location = Ti.UI.createLabel(labelFormat);
		location.top = 10;
		location.left = 20;
		location.text = json.current_observation.display_location.full;
		
	var time = Ti.UI.createLabel(labelFormat);
		time.top = location.top + 20;
		time.left = 20;
		time.font = {fontSize: 12, fontWeight: "bold", fontFamily: "Roboto"};
		time.text = json.current_observation.local_time_rfc822;
		
	var temp = Ti.UI.createLabel(labelFormat);
		temp.top = location.top + 70;
		temp.left = 20;
		temp.font = {fontSize: 46};
		temp.text = json.current_observation.temp_f + " F";
		
	var highLow = Ti.UI.createLabel(labelFormat);
		highLow.top = location.top + 50;
		highLow.left = temp.left + 10;
		highLow.font = {fontSize: 12, fontWeight: "bold", fontFamily: "Roboto"};
		highLow.text = json.almanac.temp_high.normal.F + " F / " + json.almanac.temp_low.normal.F + " F";
		
	var weather = Ti.UI.createLabel(labelFormat);
		weather.top = temp.top + 70;
		weather.left = 20;
		weather.text = json.current_observation.weather;
	
	var feels = Ti.UI.createLabel(labelFormat);
		feels.top = weather.top + 20;
		feels.left = 20;
		feels.text = "Feels like " + json.current_observation.feelslike_f + " F";
		
	var recordHigh = Ti.UI.createLabel(labelFormat);
		recordHigh.top = feels.top + 20;
		recordHigh.left = 20;
		recordHigh.text = "Record High: " + json.almanac.temp_high.record.F + " F, in: " + json.almanac.temp_high.recordyear;
	
	var recordLow = Ti.UI.createLabel(labelFormat);
		recordLow.top = feels.top + 20;
		recordLow.left = sunrise.left + 10;
		recordLow.text = "Record Low: " + json.almanac.temp_low.record.F + " F, in : " + json.almanac.temp_low.recordyear;
		
	var wind = Ti.UI.createLabel(labelFormat);
		wind.top = fullUrl.top + 20;
		wind.left = 20;
		wind.text = "Wind: " + json.current_observation.wind_mph + " mph " + json.current_observation.wind_dir;
	
	var humidity = Ti.UI.createLabel(labelFormat);
		humidity.top = wind.top + 20;
		humidity.left = 20;
		humidity.text = "Humidity: " + json.current_observation.relative_humidity;
		
	var uv = Ti.UI.createLabel(labelFormat);
		uv.top = humidity.top + 20;
		uv.left = 20;
		uv.text = "UV index: " + json.current_observation.UV;
		
	var dewPoint = Ti.UI.createLabel(labelFormat);
		dewPoint.top = fullUrl.top + 20;
		dewPoint.right = 20;
		dewPoint.text = "Dew point: " + json.current_observation.dewpoint_f + " F";
	
	var pressure = Ti.UI.createLabel(labelFormat);
		pressure.top = dewPoint.top + 20;
		pressure.right = 20;
		pressure.text = "Pressure: " + json.current_observation.pressure_mb + " mB-";
		
	var visibility = Ti.UI.createLabel(labelFormat);
		visibility.top = pressure.top + 20;
		visibility.right = 20;
		visibility.text = "Visibility: " + json.current_observation.visibility_mi + " mi";
		
	var update = Ti.UI.createLabel(labelFormat);
		update.textAlign = "center";
		update.left = 20;
		update.right = 20;
		update.bottom = 30;
		update.color = "yellow";
		update.text = json.current_observation.observation_time;
		
	win.add(bg);
	bg.add(location);
	bg.add(time);
	bg.add(temp);
	bg.add(highLow);
	bg.add(weather);
	bg.add(feels);
	bg.add(recordHigh);
	bg.add(recordLow);
	bg.add(wind);	
	bg.add(humidity);
	bg.add(uv);	
	bg.add(dewPoint);
	bg.add(pressure);
	bg.add(visibility);
	bg.add(update);
	win.open();
	
};

exports.checkData = checkData;