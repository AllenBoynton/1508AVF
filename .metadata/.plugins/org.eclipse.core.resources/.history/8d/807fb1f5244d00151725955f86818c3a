// User Interface module and text with json data display
var win = Ti.UI.createWindow({
	backgroundColor: "gray",
	layout: "vertical"
});

win.addEventListener("open", function(){
	var sound = Ti.Media.createSound({
		url: "Engine_revving.wav",
		preload: true,
		volume: 0.1,
		allowBackground: true
	});
	sound.play();
});

var bg = Ti.UI.createView({
	backgroundImage: "images/Infiniti.jpg",
	top: 20,
	size: "80%",
	height: "100%",
	width: "100%"
});

var nameWindow = Ti.UI.createWindow({
	backgroundColor: "gray",
	opacity: .5,
	top: bg.top + 50,
	height: 50,
	left: 25,
	right: 25
});
var infoWindow = Ti.UI.createWindow({
	backgroundColor: "gray",
	opacity: .5,
	top: bg.top + 100,
	left: 25,
	right: 25,
	bottom: 50
});
	
var name = Ti.UI.createLabel(/*labelFormat*/{
	color: "white", 
	top: 10,
	text: "name",
	textAlign: "center"
});	

var address = Ti.UI.createLabel(/*labelFormat*/{
	color: "white", 
	top: name.top + name.height + 10,
	text: "address"
});	

var distance = Ti.UI.createLabel(/*labelFormat*/{
	color: "white", 
	top: address.top + address.height + 10,
	text: "distance"
});	

var make = Ti.UI.createLabel(/*labelFormat*/{
	color: "white", 
	top: distance.top + distance.height + 10,
	text: "make"
});	

var repairs = Ti.UI.createLabel(/*labelFormat*/{
	color: "white", 
	top: make.top + make.height + 10,
	text: "repairs"
});	

var hours = Ti.UI.createLabel(/*labelFormat*/{
	color: "white", 
	top: repairs.top + repairs.height + 10,
	text: "hours"
});	

// Function to display the data on the UI
var addText = function(dataBackup){
		name.text 	  = dataBackup.name;
		address.text  = dataBackup.address;
		distance.text = "Distance from here: " + dataBackup.distance + " mi";
		make.text 	  = "We specialize in repairs of mostly " + dataBackup.make + "s. \n but repair most all foreign and domestic.";
		repairs.text  = "Type of work performed as a " + dataBackup.repairs + ".";
		hours.text 	  = "Hours of Operation: " + dataBackup.hours;	
};

// Main code
win.add(bg);
win.add(nameWindow);
win.add(infoWindow);
nameWindow.add(name);
infoWindow.add(address);
infoWindow.add(distance);
infoWindow.add(make);
infoWindow.add(repairs);
infoWindow.add(hours);
win.open();

// Export addText function
exports.addtext = addText;